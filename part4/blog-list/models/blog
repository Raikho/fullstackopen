const config = require('../utils/config')
const logger = require('../utils/logger')
const mongoose = require('mongoose')

mongoose.set('strictQuery', false)
const url = config.MONGODB_URI

logger.info('connecting to', url)
mongoose.connect(url)
	.then(() => logger.info('connected to MongoDB'))
	.catch(err => logger.error('error connecting to MongoDB:', err.message))

const blogSchema = new mongoose.Schema({
	title: {
		type: String,
		required: true,
	},
	author: {
		type: String,
		required: true,
	},
	url: {
		type: String,
		required: true,
	},
	likes: {
		type: Number,
		required: true,
	}
})

module.exports = mongoose.model('Blog', blogSchema)